# API Log Iceberg Test Configuration
# ===================================
#
# Copy this file to .env and configure your settings:
#   cp .env.sample .env
#
# Then edit .env with your license key and any customizations.

# =============================================================================
# MinIO Container Image
# =============================================================================

# MinIO AIStor image with Iceberg API log support
# Use a local build or the latest EDGE release
MINIO_IMAGE=minio/minio:latest

# =============================================================================
# MinIO License (REQUIRED)
# =============================================================================

# MinIO License (required for AIStor features including Iceberg)
# Get your license from https://min.io/pricing
MINIO_LICENSE=your-license-key-here

# =============================================================================
# MinIO Credentials
# =============================================================================

MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# =============================================================================
# Iceberg API Log Configuration
# =============================================================================

# Warehouse where API logs will be written as an Iceberg table
ICEBERG_WAREHOUSE=api-logs

# Iceberg namespace (database) for the table
ICEBERG_NAMESPACE=minio

# Iceberg table name
ICEBERG_TABLE=api_logs

# How often each node writes Parquet files (default: 5m)
# Set lower for testing to see results faster
ICEBERG_WRITE_INTERVAL=30s

# How often the leader commits files to Iceberg (default: 1h)
# Set lower for testing to see results faster
ICEBERG_COMMIT_INTERVAL=1m

# Batch size for Parquet writes (default: 10000)
# Set lower for testing
ICEBERG_BATCH_SIZE=1000

# =============================================================================
# Internal API Log Storage Configuration
# =============================================================================

# Drive space limit for local API log storage
API_LOG_DRIVE_LIMIT=1Gi

# How often to flush logs to disk
API_LOG_FLUSH_INTERVAL=1m

# =============================================================================
# Trino Configuration
# =============================================================================

TRINO_IMAGE=trinodb/trino:477

# =============================================================================
# Network Ports
# =============================================================================

# MinIO API port
API_PORT=9000

# MinIO Console port
CONSOLE_PORT=9001

# Trino Web UI / JDBC port
TRINO_PORT=9999

# =============================================================================
# Traffic Generation (for testing)
# =============================================================================

# Enable traffic generation to create API log entries
GENERATE_TRAFFIC=true

# Bucket for test data
TRAFFIC_BUCKET=test-data

# Number of objects to create
TRAFFIC_OBJECTS=100

# Size of each object in bytes
TRAFFIC_OBJECT_SIZE=1024

# How long to wait for logs to appear in Iceberg (seconds)
WAIT_FOR_ICEBERG_SECONDS=120
